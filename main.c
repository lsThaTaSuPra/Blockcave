#include <stdlib.h>
#include <stdio.h>
#include <stdbool.h>
#include <SDL.h>

#define SCREEN_WIDTH 800 // MAP_WIDTH * TILE_SIZE
#define SCREEN_HEIGHT 460 // MAP_HEIGHT * TILE_SIZE

#define TILE_SIZE 32
#define MAP_WIDTH 96
#define MAP_HEIGHT 77
#define SPECIAL 36 && 62

#define GRAVITY 0.5f
#define JUMP_FORCE -15.0f
#define PLAYER_SPEED 15.0f
#define COLLISION_MARGIN 5.0f // Marge de collision pour permettre le passage dans des espaces étroits

typedef struct {
    float x, y;
    float vx, vy;
    bool isGrounded;
} Player;

// Déclaration de la carte
int map[MAP_WIDTH][MAP_HEIGHT] = {{22, 46, 38, 30, 46, 38, 46, 30, 30, 46, 30, 46, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 30, 30, 46, 38, 46, 38, 30, 38, 22, 22, 30, 38, 30, 38, 30, 22, 38, 46, 46, 30, 46, 38, 38, 46, 30, 38, 22, 38, 22, 46, 22, 30, 38, 22, 38, 38, 22, 30, 30, 30, 22, 30, 46, 38, 22, 38, 30, 46, 22, 22, 22},
{38, 46, 30, 38, 22, 30, 22, 30, 22, 38, 30, 30, 62, 62, 62, 62, 62, 62, 62, 62, 62, 62, 62, 62, 62, 62, 30, 46, 22, 38, 38, 30, 22, 22, 46, 38, 30, 46, 30, 38, 46, 46, 38, 38, 22, 38, 38, 22, 46, 38, 22, 38, 46, 38, 22, 22, 30, 38, 38, 46, 38, 38, 30, 38, 38, 22, 22, 46, 30, 22, 30, 22, 22, 22, 46, 30, 30},
{30, 46, 38, 46, 38, 30, 22, 38, 30, 46, 46, 47, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 45, 22, 22, 22, 30, 30, 30, 30, 22, 38, 38, 46, 46, 22, 38, 38, 30, 46, 30, 38, 38, 46, 46, 38, 46, 30, 22, 38, 30, 30, 38, 30, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 30, 30},
{46, 46, 22, 30, 46, 30, 30, 38, 46, 38, 30, 31, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 37, 46, 30, 30, 38, 22, 22, 46, 30, 38, 22, 22, 30, 30, 30, 30, 22, 46, 22, 38, 38, 22, 38, 30, 38, 30, 22, 30, 30, 30, 30, 23, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 45, 38},
{38, 46, 30, 22, 22, 46, 22, 46, 30, 46, 38, 23, 0, 0, 0, 13, 14, 14, 14, 14, 14, 14, 15, 0, 0, 0, 45, 38, 30, 30, 22, 38, 38, 22, 22, 38, 46, 38, 30, 22, 38, 46, 22, 22, 30, 22, 30, 38, 46, 38, 30, 38, 22, 46, 38, 46, 46, 31, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 26, 22},
{46, 30, 46, 38, 30, 22, 38, 46, 30, 30, 22, 31, 0, 0, 0, 21, 30, 30, 38, 38, 30, 46, 23, 0, 0, 0, 45, 30, 46, 46, 22, 46, 22, 46, 38, 38, 22, 30, 38, 38, 30, 22, 30, 30, 46, 46, 38, 22, 22, 38, 46, 30, 38, 38, 22, 22, 38, 47, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 34, 22},
{22, 46, 38, 30, 46, 38, 46, 46, 30, 22, 38, 39, 0, 0, 0, 45, 46, 22, 46, 38, 30, 38, 31, 0, 0, 0, 21, 46, 38, 38, 38, 22, 38, 38, 30, 30, 38, 46, 46, 46, 38, 30, 30, 46, 22, 38, 38, 30, 22, 38, 38, 38, 22, 22, 30, 38, 46, 23, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 42, 38},
{22, 30, 22, 22, 30, 38, 30, 46, 30, 22, 46, 31, 0, 0, 0, 21, 46, 38, 22, 22, 38, 30, 47, 0, 0, 0, 53, 54, 54, 54, 54, 46, 30, 30, 54, 54, 54, 54, 54, 54, 54, 38, 54, 54, 54, 22, 22, 38, 46, 38, 30, 46, 38, 30, 30, 38, 46, 47, 0, 0, 0, 35, 35, 35, 35, 35, 35, 35, 35, 35, 0, 0, 0, 0, 0, 29, 22},
{38, 30, 22, 22, 46, 22, 30, 22, 46, 46, 46, 39, 0, 0, 0, 34, 30, 22, 38, 30, 22, 38, 47, 0, 0, 0, 0, 0, 0, 0, 0, 29, 30, 31, 0, 0, 0, 0, 0, 0, 0, 29, 0, 0, 0, 45, 46, 46, 46, 46, 46, 30, 30, 46, 38, 38, 38, 31, 0, 0, 0, 35, 0, 0, 0, 0, 0, 0, 0, 35, 0, 0, 0, 0, 0, 37, 38},
{22, 22, 38, 30, 46, 38, 46, 46, 30, 30, 38, 31, 0, 0, 0, 42, 30, 38, 38, 22, 30, 38, 47, 0, 0, 0, 0, 0, 0, 0, 0, 29, 38, 31, 0, 0, 0, 0, 21, 0, 0, 0, 0, 0, 0, 34, 46, 30, 30, 46, 38, 22, 30, 30, 38, 46, 22, 47, 0, 0, 0, 35, 0, 0, 0, 0, 0, 0, 0, 35, 0, 0, 0, 0, 0, 42, 38},
{46, 30, 22, 38, 38, 22, 30, 30, 46, 46, 46, 39, 0, 0, 0, 21, 46, 22, 38, 46, 22, 22, 23, 0, 0, 0, 0, 0, 0, 0, 0, 45, 38, 23, 0, 0, 0, 13, 22, 14, 14, 15, 0, 0, 0, 42, 22, 46, 30, 22, 30, 22, 22, 30, 38, 30, 38, 31, 0, 0, 0, 35, 0, 0, 0, 0, 0, 0, 0, 35, 0, 0, 0, 0, 0, 42, 22},
{46, 30, 22, 38, 22, 30, 38, 30, 46, 22, 30, 31, 0, 0, 0, 21, 46, 22, 30, 38, 30, 46, 23, 0, 0, 0, 0, 0, 0, 0, 0, 29, 38, 23, 0, 0, 0, 29, 0, 0, 0, 23, 0, 0, 0, 37, 46, 38, 46, 38, 22, 22, 22, 46, 46, 22, 38, 39, 0, 0, 0, 35, 0, 0, 0, 35, 0, 0, 0, 35, 0, 0, 0, 0, 0, 42, 46},
{22, 46, 46, 22, 46, 46, 38, 38, 46, 38, 38, 23, 0, 0, 0, 29, 30, 38, 46, 46, 22, 22, 39, 0, 0, 0, 13, 0, 0, 0, 0, 21, 38, 39, 0, 0, 0, 29, 0, 0, 0, 23, 0, 0, 0, 45, 22, 38, 30, 30, 38, 38, 46, 30, 30, 30, 30, 31, 0, 0, 0, 35, 0, 0, 0, 35, 0, 0, 0, 35, 0, 0, 0, 0, 0, 45, 30},
{30, 54, 54, 54, 54, 54, 38, 54, 54, 54, 38, 55, 0, 0, 0, 37, 38, 22, 38, 38, 38, 46, 31, 0, 0, 0, 21, 0, 0, 0, 0, 53, 46, 55, 0, 0, 0, 0, 0, 0, 13, 39, 0, 0, 0, 34, 38, 38, 30, 46, 22, 22, 38, 38, 38, 22, 46, 31, 0, 0, 0, 35, 0, 0, 0, 35, 0, 0, 0, 35, 0, 0, 0, 0, 0, 29, 38},
{39, 0, 0, 0, 0, 0, 21, 0, 0, 0, 29, 0, 0, 0, 0, 0, 36, 30, 38, 30, 30, 22, 47, 0, 0, 0, 21, 0, 0, 0, 0, 0, 46, 0, 0, 0, 0, 0, 0, 21, 30, 31, 0, 0, 0, 42, 22, 22, 38, 38, 46, 38, 22, 22, 30, 22, 30, 31, 0, 0, 0, 0, 0, 0, 0, 35, 0, 0, 0, 35, 0, 0, 0, 0, 13, 22, 46},
{31, 0, 0, 0, 0, 0, 21, 0, 0, 0, 29, 0, 0, 0, 0, 0, 36, 22, 38, 22, 46, 30, 31, 0, 0, 0, 45, 0, 0, 0, 0, 0, 46, 0, 0, 0, 0, 0, 0, 0, 53, 31, 0, 0, 0, 26, 30, 30, 46, 38, 22, 30, 46, 22, 30, 38, 46, 39, 0, 0, 0, 0, 0, 0, 0, 35, 35, 35, 35, 35, 0, 0, 0, 13, 38, 38, 30},
{31, 0, 0, 0, 0, 0, 45, 0, 0, 0, 45, 0, 0, 0, 0, 0, 36, 38, 46, 30, 30, 46, 47, 0, 0, 0, 45, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 47, 0, 0, 0, 23, 0, 0, 0, 42, 30, 30, 30, 30, 30, 38, 46, 30, 38, 46, 46, 39, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 37, 38, 38, 30, 38},
{23, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 36, 38, 38, 30, 38, 22, 39, 0, 0, 0, 21, 0, 0, 0, 0, 0, 0, 0, 0, 45, 0, 47, 0, 0, 0, 23, 0, 0, 0, 29, 22, 46, 46, 30, 46, 46, 22, 46, 46, 38, 46, 31, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 53, 38, 22, 38},
{31, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 36, 30, 46, 30, 30, 46, 23, 0, 0, 0, 45, 0, 0, 0, 0, 0, 0, 0, 0, 45, 0, 31, 0, 0, 0, 39, 0, 0, 0, 21, 30, 38, 38, 22, 38, 38, 22, 38, 46, 38, 46, 47, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 53, 22, 46},
{39, 0, 0, 0, 0, 0, 0, 0, 29, 0, 0, 0, 0, 29, 0, 0, 36, 46, 46, 38, 30, 22, 23, 0, 0, 0, 53, 54, 54, 15, 0, 0, 0, 13, 54, 54, 54, 55, 0, 0, 0, 47, 0, 0, 0, 37, 46, 30, 30, 46, 38, 22, 38, 22, 22, 38, 30, 39, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 45, 30},
{23, 0, 0, 0, 0, 29, 0, 0, 37, 0, 0, 0, 0, 45, 0, 0, 36, 38, 38, 22, 22, 38, 23, 0, 0, 0, 0, 0, 0, 47, 0, 0, 0, 31, 0, 0, 0, 0, 0, 0, 0, 31, 0, 0, 0, 34, 46, 30, 30, 46, 46, 38, 46, 38, 38, 22, 38, 31, 0, 0, 0, 35, 35, 35, 35, 35, 35, 35, 35, 35, 0, 0, 0, 0, 0, 45, 22},
{23, 0, 0, 0, 0, 29, 0, 0, 37, 0, 0, 0, 0, 45, 0, 0, 36, 38, 46, 46, 22, 30, 47, 0, 0, 0, 0, 0, 0, 47, 0, 0, 0, 31, 0, 0, 0, 0, 0, 0, 0, 47, 0, 0, 0, 34, 46, 46, 38, 46, 22, 46, 22, 22, 30, 38, 38, 31, 0, 0, 0, 35, 0, 0, 0, 0, 0, 0, 0, 35, 0, 0, 0, 0, 0, 29, 30},
{47, 0, 0, 0, 0, 21, 14, 14, 38, 14, 14, 14, 14, 38, 14, 14, 14, 35, 46, 46, 30, 22, 23, 0, 0, 0, 0, 0, 0, 47, 0, 0, 0, 23, 0, 0, 0, 0, 0, 0, 0, 47, 0, 0, 0, 37, 46, 22, 22, 22, 30, 38, 30, 30, 38, 22, 22, 47, 0, 0, 0, 35, 0, 0, 0, 0, 0, 0, 0, 35, 0, 0, 0, 0, 0, 29, 30},
{31, 0, 0, 0, 0, 53, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 30, 38, 22, 22, 38, 38, 38, 54, 54, 30, 0, 0, 0, 47, 0, 0, 0, 47, 0, 0, 0, 13, 54, 54, 54, 31, 0, 0, 0, 45, 46, 38, 46, 30, 22, 30, 22, 30, 22, 30, 30, 23, 0, 0, 0, 35, 0, 0, 0, 0, 35, 0, 0, 35, 0, 0, 0, 0, 0, 42, 46},
{47, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 21, 22, 30, 22, 38, 30, 31, 0, 0, 37, 0, 0, 0, 47, 0, 0, 0, 23, 0, 0, 0, 47, 0, 0, 0, 0, 0, 0, 13, 38, 22, 46, 22, 30, 38, 22, 38, 30, 38, 46, 22, 39, 0, 0, 0, 35, 0, 0, 0, 0, 35, 0, 0, 35, 0, 0, 0, 0, 0, 26, 38},
{31, 0, 0, 0, 0, 0, 0, 29, 0, 0, 0, 0, 0, 0, 0, 0, 26, 22, 22, 30, 30, 46, 39, 0, 0, 37, 0, 0, 0, 47, 0, 0, 0, 47, 0, 0, 0, 31, 0, 0, 0, 0, 0, 13, 38, 38, 38, 38, 38, 22, 38, 46, 46, 30, 46, 38, 22, 31, 0, 0, 0, 35, 0, 0, 0, 0, 35, 0, 0, 35, 0, 0, 0, 0, 0, 37, 22},
{23, 0, 0, 0, 0, 0, 0, 29, 0, 0, 0, 0, 45, 0, 0, 0, 34, 22, 46, 30, 30, 38, 39, 0, 0, 53, 54, 38, 54, 55, 0, 0, 0, 31, 0, 0, 0, 39, 0, 0, 0, 0, 0, 53, 38, 38, 22, 38, 22, 46, 38, 30, 46, 38, 30, 46, 22, 47, 0, 0, 0, 35, 0, 0, 0, 0, 35, 35, 35, 35, 0, 0, 0, 0, 0, 29, 30},
{23, 0, 0, 0, 0, 0, 0, 29, 0, 0, 0, 0, 21, 0, 0, 0, 34, 22, 30, 30, 38, 22, 23, 0, 0, 0, 0, 29, 0, 0, 0, 0, 0, 31, 0, 0, 0, 39, 0, 0, 0, 0, 0, 0, 53, 38, 22, 30, 38, 22, 46, 30, 46, 38, 22, 30, 30, 47, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 45, 46},
{39, 0, 0, 0, 29, 0, 0, 0, 0, 0, 0, 0, 37, 0, 0, 0, 29, 46, 30, 38, 46, 30, 39, 0, 0, 0, 0, 29, 0, 0, 0, 0, 0, 23, 0, 0, 0, 47, 0, 0, 0, 39, 0, 0, 0, 21, 38, 30, 30, 46, 30, 38, 38, 30, 22, 46, 30, 47, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 29, 38},
{31, 0, 0, 0, 21, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 29, 22, 30, 22, 46, 38, 47, 0, 0, 0, 0, 29, 0, 0, 0, 0, 0, 23, 0, 0, 0, 31, 0, 0, 0, 23, 0, 0, 0, 34, 30, 38, 30, 46, 22, 22, 30, 38, 38, 38, 38, 30, 14, 14, 14, 14, 14, 14, 14, 14, 14, 15, 0, 0, 0, 0, 13, 14, 14, 22, 22},
{23, 0, 0, 0, 37, 0, 0, 0, 0, 37, 0, 0, 0, 0, 0, 0, 42, 38, 30, 22, 38, 46, 31, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 39, 0, 0, 0, 47, 0, 0, 0, 31, 0, 0, 0, 34, 22, 46, 38, 38, 38, 30, 38, 22, 38, 30, 38, 30, 30, 38, 22, 46, 30, 22, 22, 30, 46, 47, 0, 0, 0, 0, 21, 30, 30, 30, 46},
{31, 0, 0, 0, 0, 0, 0, 0, 0, 21, 0, 0, 0, 29, 0, 0, 42, 30, 22, 46, 22, 38, 39, 0, 0, 0, 0, 0, 0, 0, 0, 29, 0, 23, 0, 0, 0, 53, 15, 0, 0, 47, 0, 0, 0, 21, 46, 38, 38, 38, 38, 22, 38, 30, 30, 30, 38, 46, 46, 30, 38, 30, 22, 22, 46, 46, 30, 31, 0, 0, 0, 0, 21, 22, 30, 38, 30},
{31, 0, 0, 0, 0, 0, 0, 0, 0, 29, 0, 0, 0, 37, 0, 0, 37, 38, 30, 30, 46, 30, 47, 0, 0, 0, 0, 0, 0, 0, 0, 29, 0, 39, 0, 0, 0, 0, 37, 0, 0, 31, 0, 0, 0, 45, 38, 46, 30, 30, 22, 46, 38, 30, 22, 30, 30, 22, 22, 46, 38, 30, 22, 30, 38, 46, 38, 47, 0, 0, 0, 0, 37, 30, 22, 38, 22},
{47, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 29, 0, 0, 37, 30, 30, 22, 22, 38, 30, 54, 54, 54, 15, 0, 0, 0, 13, 54, 54, 54, 15, 0, 0, 0, 37, 0, 0, 47, 0, 0, 0, 21, 46, 38, 30, 22, 46, 38, 30, 30, 38, 22, 22, 38, 22, 38, 38, 46, 22, 38, 38, 30, 22, 31, 0, 0, 0, 0, 21, 30, 46, 46, 22},
{47, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 37, 46, 22, 22, 38, 22, 47, 0, 0, 0, 21, 0, 0, 0, 31, 0, 0, 0, 29, 0, 0, 0, 0, 0, 0, 23, 0, 0, 0, 26, 22, 38, 38, 30, 30, 22, 22, 30, 30, 46, 46, 38, 30, 46, 38, 46, 22, 46, 22, 30, 46, 39, 0, 0, 0, 0, 53, 46, 22, 22, 46},
{31, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 29, 46, 46, 46, 22, 30, 39, 0, 0, 0, 45, 0, 0, 0, 47, 0, 0, 0, 29, 0, 0, 0, 0, 0, 29, 31, 0, 0, 0, 42, 46, 30, 22, 46, 38, 22, 46, 22, 46, 30, 30, 22, 46, 38, 46, 22, 46, 38, 46, 38, 30, 47, 0, 0, 0, 0, 0, 53, 46, 46, 46},
{30, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 15, 0, 0, 0, 45, 38, 22, 46, 46, 46, 31, 0, 0, 0, 29, 0, 0, 0, 23, 0, 0, 0, 29, 0, 0, 0, 0, 0, 29, 31, 0, 0, 0, 34, 38, 38, 30, 30, 46, 38, 22, 46, 46, 46, 22, 46, 46, 46, 38, 22, 30, 22, 22, 22, 30, 47, 0, 0, 0, 0, 0, 0, 53, 35, 30},
{22, 30, 22, 46, 22, 38, 22, 46, 38, 38, 30, 38, 31, 0, 0, 0, 42, 46, 22, 38, 22, 30, 31, 0, 0, 0, 45, 0, 0, 0, 23, 0, 0, 0, 29, 0, 0, 0, 29, 0, 0, 29, 0, 0, 0, 26, 22, 30, 46, 30, 22, 38, 38, 38, 38, 30, 22, 46, 46, 30, 38, 38, 38, 22, 30, 22, 30, 31, 0, 0, 0, 0, 0, 0, 0, 29, 46},
{22, 22, 22, 30, 22, 22, 46, 22, 30, 38, 46, 46, 31, 0, 0, 0, 42, 30, 22, 22, 30, 38, 47, 0, 0, 0, 0, 0, 0, 0, 31, 0, 0, 0, 29, 0, 0, 0, 29, 0, 0, 29, 0, 0, 0, 42, 38, 46, 30, 46, 22, 30, 30, 38, 22, 38, 30, 22, 22, 22, 22, 30, 22, 46, 38, 46, 38, 38, 14, 14, 15, 0, 0, 0, 0, 45, 46},
{46, 38, 46, 38, 22, 22, 46, 46, 30, 30, 22, 22, 55, 0, 0, 0, 21, 22, 22, 38, 30, 30, 47, 0, 0, 0, 0, 0, 0, 0, 47, 0, 0, 0, 29, 0, 0, 0, 29, 0, 0, 29, 0, 0, 0, 45, 30, 46, 22, 38, 46, 30, 46, 46, 22, 46, 46, 22, 46, 22, 30, 38, 46, 22, 22, 46, 30, 22, 22, 22, 47, 0, 0, 0, 0, 29, 30},
{22, 30, 38, 38, 38, 38, 46, 22, 46, 30, 22, 31, 0, 0, 0, 13, 30, 46, 30, 30, 46, 38, 23, 0, 0, 0, 0, 29, 0, 0, 39, 0, 0, 0, 29, 0, 0, 0, 29, 0, 0, 29, 0, 0, 0, 37, 46, 22, 30, 22, 30, 46, 30, 38, 30, 38, 30, 38, 30, 30, 38, 30, 38, 38, 46, 22, 38, 22, 46, 46, 39, 0, 0, 0, 0, 29, 30},
{22, 22, 30, 22, 22, 30, 30, 46, 46, 38, 22, 31, 0, 0, 0, 53, 30, 46, 22, 30, 38, 38, 47, 0, 0, 0, 0, 45, 0, 0, 23, 0, 0, 0, 29, 0, 0, 0, 29, 0, 0, 29, 0, 0, 0, 37, 30, 38, 46, 46, 30, 22, 46, 22, 38, 30, 38, 38, 30, 22, 38, 30, 38, 22, 22, 22, 46, 30, 38, 38, 47, 0, 0, 0, 0, 45, 46},
{22, 46, 38, 22, 38, 38, 38, 46, 30, 38, 30, 46, 15, 0, 0, 0, 37, 22, 22, 46, 46, 30, 23, 0, 0, 0, 13, 54, 54, 54, 47, 0, 0, 0, 29, 0, 0, 0, 29, 0, 0, 29, 0, 0, 0, 37, 30, 22, 30, 30, 46, 30, 22, 38, 22, 46, 46, 46, 22, 38, 38, 22, 46, 46, 38, 46, 46, 38, 46, 38, 23, 0, 0, 0, 0, 42, 30},
{22, 30, 22, 30, 30, 38, 22, 22, 46, 30, 30, 38, 31, 0, 0, 0, 45, 22, 22, 38, 22, 22, 23, 0, 0, 36, 47, 0, 0, 0, 0, 0, 0, 0, 29, 0, 0, 0, 29, 0, 0, 29, 0, 0, 0, 34, 46, 30, 30, 46, 38, 22, 30, 22, 30, 38, 46, 22, 46, 46, 38, 38, 54, 54, 54, 54, 54, 54, 54, 54, 55, 0, 0, 0, 0, 34, 46},
{46, 38, 46, 46, 38, 22, 22, 38, 22, 22, 22, 22, 55, 0, 0, 0, 42, 46, 30, 38, 30, 22, 23, 0, 0, 0, 39, 0, 0, 0, 0, 0, 0, 0, 29, 0, 0, 0, 29, 0, 0, 29, 0, 0, 0, 42, 30, 38, 22, 22, 22, 22, 30, 38, 22, 30, 30, 38, 46, 22, 38, 31, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 42, 22},
{46, 30, 46, 38, 46, 38, 38, 22, 22, 30, 46, 31, 0, 0, 0, 0, 21, 22, 46, 30, 46, 30, 39, 0, 0, 0, 31, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 29, 0, 0, 29, 0, 0, 0, 45, 38, 46, 22, 22, 22, 22, 22, 46, 38, 30, 30, 22, 22, 38, 46, 31, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 21, 46},
{30, 46, 30, 38, 46, 30, 22, 22, 38, 30, 46, 31, 0, 0, 0, 13, 38, 22, 46, 22, 46, 22, 39, 0, 0, 0, 23, 0, 0, 0, 0, 0, 29, 0, 0, 0, 29, 0, 29, 0, 0, 29, 0, 0, 0, 21, 30, 30, 38, 38, 30, 38, 22, 30, 22, 46, 46, 38, 30, 38, 46, 39, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 29, 22},
{46, 38, 38, 38, 38, 46, 38, 38, 38, 30, 30, 31, 0, 0, 0, 53, 30, 46, 30, 46, 30, 38, 35, 54, 54, 54, 55, 0, 0, 0, 0, 0, 29, 0, 0, 0, 29, 0, 29, 0, 0, 29, 0, 0, 0, 21, 30, 22, 22, 38, 38, 46, 38, 30, 30, 38, 38, 38, 22, 46, 38, 39, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 37, 46},
{22, 30, 30, 30, 30, 38, 38, 46, 22, 46, 46, 22, 15, 0, 0, 0, 45, 30, 38, 22, 46, 22, 39, 0, 0, 0, 0, 0, 0, 0, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 0, 0, 0, 37, 22, 46, 46, 46, 22, 38, 30, 46, 30, 30, 46, 30, 38, 30, 30, 31, 0, 0, 35, 35, 35, 35, 35, 35, 35, 35, 35, 0, 0, 45, 30},
{22, 46, 22, 22, 30, 46, 30, 46, 22, 22, 38, 30, 39, 0, 0, 0, 37, 46, 22, 46, 46, 22, 39, 0, 0, 0, 0, 0, 0, 0, 21, 0, 29, 0, 0, 0, 29, 0, 0, 0, 29, 0, 0, 0, 0, 37, 22, 22, 30, 30, 30, 22, 22, 30, 38, 46, 46, 30, 22, 30, 30, 47, 0, 0, 35, 0, 0, 35, 0, 35, 0, 0, 35, 0, 0, 21, 38},
{38, 30, 30, 46, 38, 38, 54, 54, 54, 54, 54, 54, 55, 0, 0, 0, 29, 22, 46, 30, 38, 30, 47, 0, 0, 0, 0, 0, 0, 0, 45, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 29, 30, 46, 46, 22, 38, 38, 30, 46, 30, 38, 30, 22, 22, 30, 38, 38, 47, 0, 0, 35, 0, 0, 35, 0, 35, 0, 0, 35, 0, 0, 42, 38},
{46, 22, 46, 22, 30, 39, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 21, 30, 38, 46, 46, 30, 23, 0, 0, 0, 0, 0, 0, 0, 29, 0, 0, 0, 29, 0, 0, 0, 29, 0, 0, 0, 29, 0, 0, 29, 30, 38, 38, 38, 30, 46, 22, 38, 22, 30, 30, 30, 22, 22, 38, 31, 0, 0, 35, 35, 35, 35, 0, 35, 35, 35, 35, 0, 0, 34, 30},
{30, 30, 30, 30, 46, 47, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 37, 38, 38, 46, 46, 22, 23, 0, 0, 0, 0, 13, 14, 14, 38, 14, 14, 14, 38, 14, 14, 14, 38, 14, 14, 14, 38, 14, 14, 38, 38, 30, 22, 30, 38, 22, 30, 46, 30, 38, 30, 46, 30, 38, 22, 31, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 42, 46},
{38, 46, 38, 22, 38, 23, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 21, 22, 46, 46, 46, 38, 47, 0, 0, 0, 0, 26, 30, 30, 38, 30, 38, 46, 22, 46, 38, 38, 46, 46, 46, 22, 46, 46, 38, 22, 38, 30, 30, 30, 46, 38, 38, 30, 30, 38, 22, 22, 30, 22, 46, 47, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 34, 46},
{38, 38, 38, 22, 30, 23, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 21, 46, 22, 30, 46, 46, 31, 0, 0, 0, 0, 34, 22, 30, 30, 38, 46, 22, 30, 22, 22, 38, 30, 30, 22, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 38, 38, 38, 46, 46, 30, 38, 31, 0, 0, 35, 35, 35, 35, 35, 35, 35, 35, 35, 0, 0, 26, 38},
{30, 38, 22, 22, 38, 47, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 45, 30, 35, 54, 54, 54, 31, 0, 0, 0, 0, 42, 30, 22, 38, 22, 46, 38, 30, 30, 22, 38, 30, 22, 31, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 21, 30, 22, 22, 38, 38, 22, 31, 0, 0, 35, 0, 0, 0, 0, 0, 0, 0, 35, 0, 0, 45, 22},
{46, 38, 38, 30, 38, 31, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 45, 46, 23, 0, 0, 0, 37, 0, 0, 0, 0, 26, 38, 22, 38, 38, 30, 46, 30, 22, 30, 22, 46, 46, 39, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 53, 54, 54, 54, 54, 54, 54, 55, 0, 0, 35, 0, 0, 0, 0, 0, 0, 0, 35, 0, 0, 37, 22},
{22, 38, 46, 22, 22, 47, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 37, 38, 39, 0, 0, 0, 21, 0, 0, 0, 0, 26, 38, 30, 22, 38, 22, 22, 30, 46, 22, 22, 38, 30, 47, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 35, 35, 35, 35, 35, 35, 35, 35, 35, 0, 0, 29, 38},
{46, 30, 30, 46, 38, 39, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 37, 38, 31, 0, 0, 0, 21, 0, 0, 0, 0, 42, 30, 46, 46, 30, 38, 38, 46, 46, 46, 38, 22, 30, 31, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 53, 54, 14, 14, 14, 14, 14, 15, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 29, 46},
{38, 30, 22, 46, 46, 22, 14, 14, 14, 14, 14, 14, 15, 0, 0, 0, 37, 22, 23, 0, 0, 0, 45, 0, 0, 0, 0, 34, 38, 22, 30, 46, 46, 30, 22, 46, 38, 30, 46, 38, 47, 0, 0, 0, 0, 0, 0, 0, 0, 29, 23, 0, 0, 0, 0, 36, 38, 46, 38, 22, 46, 31, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 21, 30},
{30, 22, 22, 38, 46, 22, 22, 38, 30, 38, 46, 46, 31, 0, 0, 0, 29, 46, 39, 0, 0, 0, 29, 0, 0, 0, 0, 42, 22, 46, 30, 30, 38, 38, 22, 22, 22, 38, 38, 46, 23, 0, 0, 0, 0, 0, 0, 0, 0, 29, 39, 0, 0, 29, 0, 36, 22, 22, 30, 46, 22, 31, 0, 0, 35, 35, 35, 35, 35, 0, 0, 0, 35, 0, 0, 29, 46},
{22, 46, 38, 30, 30, 54, 54, 54, 54, 54, 54, 54, 55, 0, 0, 0, 21, 22, 39, 0, 0, 0, 0, 0, 0, 0, 0, 42, 22, 46, 38, 38, 30, 30, 22, 46, 38, 46, 38, 38, 47, 0, 0, 0, 0, 0, 0, 0, 0, 29, 47, 0, 0, 29, 0, 36, 22, 30, 30, 46, 46, 39, 0, 0, 35, 0, 0, 0, 35, 0, 0, 0, 35, 0, 0, 45, 30},
{46, 46, 38, 46, 47, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 37, 46, 23, 0, 0, 0, 0, 0, 0, 0, 0, 29, 30, 30, 30, 30, 30, 30, 30, 46, 38, 46, 46, 38, 23, 0, 0, 0, 0, 0, 0, 0, 0, 29, 39, 0, 0, 0, 0, 36, 38, 30, 46, 30, 38, 39, 0, 0, 35, 0, 0, 0, 35, 0, 0, 0, 35, 0, 0, 42, 46},
{30, 30, 38, 30, 23, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 37, 38, 47, 0, 0, 0, 0, 0, 0, 0, 13, 0, 0, 30, 30, 30, 30, 30, 38, 22, 22, 46, 30, 22, 23, 0, 0, 0, 0, 0, 0, 0, 0, 45, 47, 0, 0, 0, 29, 30, 22, 46, 22, 22, 30, 47, 0, 0, 35, 0, 0, 0, 35, 35, 35, 35, 35, 0, 0, 26, 46},
{30, 30, 46, 30, 23, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 45, 22, 39, 0, 0, 0, 0, 0, 0, 13, 0, 0, 0, 30, 30, 30, 30, 30, 38, 46, 30, 46, 30, 46, 23, 0, 0, 0, 0, 0, 0, 0, 0, 29, 39, 0, 0, 0, 29, 22, 46, 38, 22, 38, 46, 31, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 29, 22},
{38, 22, 46, 30, 47, 0, 0, 0, 0, 0, 13, 14, 14, 14, 14, 14, 35, 46, 47, 0, 0, 0, 0, 0, 0, 45, 0, 0, 0, 30, 30, 30, 30, 30, 22, 46, 38, 30, 30, 30, 39, 0, 0, 0, 54, 54, 54, 54, 54, 54, 55, 0, 0, 0, 0, 36, 22, 46, 46, 30, 46, 47, 0, 0, 35, 35, 35, 35, 35, 0, 0, 0, 35, 0, 0, 29, 22},
{22, 46, 46, 46, 47, 0, 0, 0, 0, 0, 29, 38, 30, 22, 30, 46, 30, 38, 31, 0, 0, 0, 0, 0, 0, 45, 0, 0, 0, 30, 30, 30, 30, 30, 22, 46, 22, 22, 46, 46, 39, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 29, 0, 36, 38, 30, 38, 38, 22, 47, 0, 0, 35, 0, 0, 0, 35, 0, 0, 0, 35, 0, 0, 42, 38},
{22, 22, 22, 46, 31, 0, 0, 0, 0, 0, 53, 54, 54, 54, 30, 46, 22, 22, 31, 0, 0, 0, 0, 0, 0, 53, 0, 0, 0, 30, 30, 30, 30, 30, 22, 30, 30, 30, 30, 38, 47, 0, 0, 0, 0, 0, 0, 0, 0, 29, 0, 0, 0, 29, 0, 36, 46, 30, 46, 38, 30, 31, 0, 0, 35, 0, 0, 0, 35, 0, 0, 0, 35, 0, 0, 42, 46},
{30, 22, 30, 38, 31, 0, 0, 0, 0, 0, 0, 0, 0, 36, 30, 46, 22, 30, 31, 0, 0, 0, 0, 0, 0, 0, 53, 0, 0, 30, 30, 30, 30, 30, 22, 30, 22, 22, 38, 22, 23, 0, 0, 0, 37, 30, 22, 22, 46, 46, 22, 38, 0, 0, 0, 36, 22, 22, 22, 22, 38, 23, 0, 0, 35, 0, 0, 0, 35, 35, 35, 35, 35, 0, 0, 29, 22},
{46, 46, 38, 38, 23, 0, 0, 0, 0, 0, 29, 0, 0, 36, 38, 38, 46, 22, 23, 0, 0, 0, 0, 0, 0, 0, 0, 26, 30, 30, 30, 30, 30, 30, 30, 46, 22, 38, 38, 46, 47, 0, 0, 0, 0, 45, 0, 0, 0, 0, 0, 0, 0, 0, 0, 36, 38, 38, 38, 22, 30, 31, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 29, 38},
{38, 38, 22, 46, 47, 0, 0, 0, 0, 0, 0, 0, 0, 36, 22, 46, 30, 46, 39, 0, 0, 0, 0, 0, 0, 0, 0, 34, 22, 22, 38, 30, 46, 30, 30, 22, 22, 46, 22, 46, 23, 0, 0, 0, 0, 45, 0, 0, 0, 0, 0, 0, 0, 0, 0, 36, 38, 30, 38, 46, 22, 39, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 37, 38},
{22, 22, 46, 30, 39, 0, 0, 0, 0, 0, 13, 14, 14, 14, 38, 46, 46, 30, 23, 0, 0, 0, 0, 0, 0, 0, 0, 26, 30, 38, 22, 46, 46, 46, 38, 22, 30, 30, 46, 22, 39, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 45, 0, 0, 0, 36, 46, 30, 46, 30, 30, 47, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 45, 38},
{30, 46, 38, 46, 23, 0, 0, 0, 0, 0, 29, 46, 30, 22, 30, 30, 46, 38, 31, 0, 0, 0, 0, 0, 0, 0, 0, 42, 38, 38, 30, 38, 38, 22, 22, 22, 22, 30, 38, 22, 31, 0, 0, 0, 0, 58, 0, 0, 0, 0, 0, 45, 0, 0, 0, 36, 22, 22, 46, 46, 22, 23, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 34, 30},
{22, 38, 30, 38, 23, 0, 0, 0, 0, 0, 29, 54, 54, 54, 54, 38, 54, 38, 38, 14, 15, 0, 0, 0, 0, 0, 0, 26, 22, 30, 30, 30, 22, 46, 22, 30, 30, 38, 46, 46, 31, 0, 0, 0, 0, 0, 0, 45, 0, 0, 0, 0, 0, 0, 0, 36, 30, 22, 30, 38, 30, 31, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 26, 46},
{30, 46, 46, 30, 31, 0, 0, 0, 0, 0, 37, 0, 0, 0, 0, 37, 0, 0, 42, 38, 23, 0, 0, 0, 0, 0, 0, 53, 54, 54, 54, 54, 54, 54, 38, 46, 46, 30, 38, 22, 39, 0, 0, 45, 0, 0, 0, 45, 0, 0, 0, 0, 0, 0, 0, 36, 46, 22, 46, 30, 46, 30, 14, 14, 14, 14, 14, 14, 14, 14, 15, 0, 0, 0, 0, 42, 38},
{30, 22, 22, 22, 31, 0, 0, 0, 0, 0, 37, 0, 0, 0, 0, 37, 0, 0, 42, 38, 47, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 29, 46, 22, 38, 46, 22, 23, 0, 0, 45, 0, 0, 0, 0, 0, 0, 0, 0, 45, 0, 0, 36, 22, 30, 30, 22, 22, 22, 38, 22, 46, 30, 46, 46, 30, 46, 47, 0, 0, 0, 0, 26, 30},
{30, 46, 46, 22, 39, 0, 0, 0, 0, 0, 37, 0, 0, 0, 0, 37, 0, 0, 42, 30, 47, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 37, 22, 30, 22, 46, 38, 38, 14, 14, 30, 14, 14, 14, 14, 14, 15, 0, 0, 45, 0, 0, 36, 22, 30, 22, 30, 38, 38, 38, 38, 30, 38, 38, 30, 30, 22, 39, 0, 0, 0, 0, 29, 46},
{30, 38, 30, 38, 31, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 42, 38, 47, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 37, 38, 22, 30, 22, 30, 46, 38, 38, 38, 54, 54, 54, 54, 54, 47, 0, 0, 0, 0, 0, 36, 22, 46, 22, 30, 30, 30, 38, 30, 38, 38, 30, 30, 30, 38, 39, 0, 0, 0, 0, 21, 22},
{30, 38, 46, 30, 23, 0, 0, 0, 0, 0, 0, 0, 37, 0, 0, 0, 0, 0, 42, 38, 23, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 21, 46, 46, 38, 30, 30, 46, 22, 38, 30, 40, 0, 0, 0, 0, 47, 0, 0, 0, 0, 0, 36, 38, 22, 38, 46, 30, 38, 30, 46, 38, 38, 30, 22, 46, 22, 23, 0, 0, 0, 0, 21, 46},
{38, 22, 38, 38, 23, 0, 0, 0, 0, 0, 0, 0, 37, 0, 0, 0, 0, 0, 34, 22, 23, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 29, 22, 38, 38, 30, 46, 46, 46, 38, 38, 40, 0, 0, 0, 0, 55, 0, 0, 45, 0, 0, 36, 30, 38, 22, 38, 22, 46, 30, 22, 30, 30, 46, 46, 30, 30, 39, 0, 0, 0, 0, 37, 46},
{38, 22, 30, 38, 38, 14, 14, 14, 14, 14, 14, 14, 22, 14, 15, 0, 0, 0, 34, 22, 38, 14, 14, 14, 15, 0, 0, 0, 0, 0, 0, 0, 0, 0, 29, 22, 22, 46, 22, 38, 22, 38, 38, 35, 40, 0, 0, 0, 0, 0, 0, 0, 45, 0, 0, 36, 22, 30, 22, 46, 22, 30, 30, 46, 30, 38, 22, 46, 46, 46, 31, 0, 0, 0, 0, 29, 38},
{30, 30, 38, 38, 30, 22, 46, 30, 38, 38, 22, 22, 38, 22, 31, 0, 0, 0, 34, 38, 22, 38, 46, 38, 39, 0, 0, 0, 0, 0, 0, 0, 0, 0, 29, 38, 22, 46, 22, 22, 38, 62, 62, 62, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 36, 46, 38, 22, 30, 30, 46, 46, 22, 46, 22, 38, 30, 30, 46, 47, 0, 0, 0, 0, 21, 38},
{46, 46, 22, 22, 30, 22, 38, 38, 22, 38, 22, 46, 38, 30, 31, 0, 0, 0, 34, 22, 38, 30, 46, 46, 31, 0, 0, 0, 0, 0, 0, 0, 0, 0, 37, 30, 46, 38, 22, 46, 47, 0, 0, 0, 0, 0, 13, 14, 14, 14, 14, 14, 14, 14, 14, 22, 22, 30, 22, 30, 38, 38, 22, 30, 38, 30, 38, 22, 46, 22, 47, 0, 0, 0, 0, 34, 38},
{30, 38, 30, 38, 22, 30, 38, 30, 30, 22, 22, 38, 30, 30, 55, 0, 0, 0, 34, 38, 30, 30, 22, 22, 23, 0, 0, 0, 0, 0, 0, 0, 0, 0, 29, 30, 30, 30, 38, 46, 47, 0, 0, 0, 0, 0, 29, 22, 38, 38, 22, 38, 38, 46, 46, 22, 38, 38, 30, 30, 46, 30, 30, 30, 22, 22, 38, 46, 22, 22, 47, 0, 0, 0, 0, 26, 22},
{46, 30, 46, 30, 30, 46, 38, 30, 30, 22, 30, 30, 30, 55, 0, 0, 0, 0, 26, 46, 38, 38, 30, 46, 39, 0, 0, 0, 0, 0, 0, 0, 0, 0, 53, 54, 54, 54, 54, 54, 55, 0, 0, 0, 0, 0, 37, 46, 30, 46, 22, 46, 22, 38, 46, 30, 46, 46, 46, 22, 38, 38, 30, 30, 38, 46, 22, 22, 46, 30, 39, 0, 0, 0, 0, 26, 22},
{30, 46, 30, 38, 30, 22, 46, 30, 22, 46, 38, 46, 31, 0, 0, 0, 0, 37, 38, 30, 38, 22, 46, 30, 47, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 21, 22, 46, 46, 38, 22, 46, 38, 46, 30, 22, 38, 22, 38, 46, 46, 22, 22, 22, 46, 22, 22, 30, 46, 31, 0, 0, 0, 0, 34, 38},
{38, 22, 38, 46, 30, 46, 22, 30, 30, 22, 38, 22, 30, 15, 0, 0, 0, 0, 42, 22, 38, 30, 22, 46, 31, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 37, 30, 30, 46, 38, 46, 22, 46, 22, 30, 30, 30, 30, 22, 38, 38, 22, 30, 38, 46, 38, 30, 46, 46, 31, 0, 0, 0, 0, 29, 30},
{38, 38, 30, 30, 22, 38, 30, 46, 46, 22, 22, 38, 22, 30, 15, 0, 0, 0, 26, 30, 30, 30, 22, 22, 31, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 29, 54, 54, 54, 54, 54, 46, 54, 54, 54, 54, 22, 54, 54, 54, 30, 54, 54, 54, 30, 54, 54, 54, 54, 54, 0, 0, 0, 0, 37, 38},
{46, 46, 22, 22, 30, 30, 30, 22, 54, 54, 54, 54, 54, 54, 55, 0, 0, 0, 34, 46, 30, 46, 30, 38, 47, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 13, 14, 15, 0, 0, 0, 0, 21, 0, 0, 0, 0, 0, 37, 0, 0, 0, 0, 37, 0, 0, 0, 37, 0, 0, 0, 37, 0, 0, 0, 0, 37, 0, 0, 0, 0, 34, 46},
{46, 46, 30, 22, 46, 38, 38, 31, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 42, 38, 22, 46, 30, 46, 31, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 45, 46, 23, 0, 0, 0, 0, 21, 0, 0, 0, 0, 0, 37, 0, 0, 0, 0, 37, 0, 0, 0, 37, 0, 0, 0, 37, 0, 0, 0, 0, 37, 0, 0, 0, 0, 26, 46},
{30, 30, 22, 22, 46, 38, 30, 47, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 42, 46, 46, 22, 30, 30, 23, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 37, 30, 31, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 13, 46, 30},
{30, 38, 46, 46, 22, 22, 38, 23, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 34, 38, 30, 30, 30, 46, 47, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 45, 30, 47, 0, 0, 0, 0, 0, 0, 0, 37, 0, 0, 0, 0, 37, 0, 0, 0, 0, 37, 0, 0, 0, 37, 0, 0, 0, 0, 37, 0, 0, 0, 0, 13, 46, 46, 30},
{30, 46, 38, 46, 38, 22, 46, 31, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 26, 46, 46, 38, 30, 38, 23, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 21, 30, 39, 0, 0, 0, 0, 0, 0, 0, 37, 0, 0, 0, 0, 37, 0, 0, 0, 0, 37, 0, 0, 0, 37, 0, 0, 0, 0, 37, 0, 0, 0, 13, 46, 38, 22, 38},
{38, 46, 30, 38, 46, 46, 30, 23, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 42, 22, 22, 46, 30, 30, 22, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 46, 38, 46, 14, 14, 14, 14, 14, 14, 14, 22, 14, 14, 14, 14, 22, 14, 14, 14, 14, 22, 14, 14, 14, 38, 14, 14, 14, 14, 30, 14, 14, 14, 46, 30, 46, 38, 22},
{46, 30, 22, 30, 38, 22, 30, 23, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 42, 46, 46, 46, 46, 22, 22, 22, 38, 30, 30, 46, 22, 22, 38, 22, 38, 46, 46, 30, 38, 38, 38, 22, 38, 22, 22, 22, 46, 38, 22, 38, 46, 38, 46, 38, 22, 38, 30, 22, 46, 30, 38, 22, 38, 46, 38, 46, 38, 22, 30, 22, 46, 30, 30, 38, 38, 22, 30},
{22, 22, 22, 38, 22, 30, 30, 22, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 22, 38, 38, 30, 22, 30, 38, 30, 22, 22, 38, 38, 46, 46, 38, 30, 38, 22, 38, 30, 22, 22, 38, 22, 30, 38, 46, 30, 22, 46, 30, 22, 30, 30, 38, 30, 38, 46, 22, 38, 30, 38, 30, 38, 30, 22, 46, 38, 30, 38, 38, 46, 30, 30, 38, 30, 38, 46, 38}};
#define START_X 92
#define START_Y 15

// Fonction pour charger une texture SDL_Texture depuis un fichier
SDL_Texture* loadTexture(const char* path, SDL_Renderer* renderer) {
    SDL_Surface* loadedSurface = SDL_LoadBMP(path);
    if (loadedSurface == NULL) {
        printf("Unable to load image %s! SDL_image Error: %s\n", path, SDL_GetError());
        return NULL;
    }
    SDL_Texture* texture = SDL_CreateTextureFromSurface(renderer, loadedSurface);
    SDL_FreeSurface(loadedSurface);
    return texture;
}

void renderMap(SDL_Renderer* renderer, int cameraX, int cameraY, float playerX, float playerY, SDL_Texture* playerTexture, SDL_Texture* piqueH, SDL_Texture* murH, SDL_Texture* murG, SDL_Texture* murD, SDL_Texture* cobblemur, SDL_Texture* cornerBG, SDL_Texture* murB, SDL_Texture* cornerBD, SDL_Texture* cornerHD, SDL_Texture* cornerHG) {
    for (int y = 0; y < SCREEN_HEIGHT / TILE_SIZE; y++) {
        for (int x = 0; x < SCREEN_WIDTH / TILE_SIZE; x++) {
            int tileX = cameraX + x;
            int tileY = cameraY + y;

            if (tileX >= 0 && tileX < MAP_WIDTH && tileY >= 0 && tileY < MAP_HEIGHT) {
                int tile = map[tileX][tileY];
                SDL_Rect rect = {x * TILE_SIZE, y * TILE_SIZE, TILE_SIZE, TILE_SIZE};
                if (tile) {
                    if (tile == SPECIAL) {
                        // Si le bloc est le bloc spécial, texture pic
                        SDL_RenderCopy(renderer, piqueH, NULL, &rect);
                    }
                    else if (tile == 29  || tile == 37 || tile == 21 || tile == 26 || tile == 45 || tile == 34 || tile == 42) {
                        SDL_RenderCopy(renderer, murH, NULL, &rect);
                    }
                    else if (tile == 14) {
                        SDL_RenderCopy(renderer, murG, NULL, &rect);
                    }
                    else if (tile == 54) {
                        SDL_RenderCopy(renderer, murD, NULL, &rect);
                    }
                    else if (tile == 22 || tile == 38 || tile == 30) {
                        SDL_RenderCopy(renderer, cobblemur, NULL, &rect);
                    }
                    else if (tile == 15) {
                        SDL_RenderCopy(renderer, cornerBG, NULL, &rect);
                    }
                    else if (tile == 31 || tile == 47 || tile == 23 || tile == 39) {
                        SDL_RenderCopy(renderer, murB, NULL, &rect);
                    }
                    else if (tile == 55) {
                        SDL_RenderCopy(renderer, cornerBD, NULL, &rect);
                    }
                    else if (tile == 53) {
                        SDL_RenderCopy(renderer, cornerHD, NULL, &rect);
                    }
                    else if (tile == 13) {
                        SDL_RenderCopy(renderer, cornerHG, NULL, &rect);
                    }

                     else {
                        //texture cobble
                        SDL_RenderCopy(renderer, cobblemur, NULL, &rect);
                        
                    }
                }
            }
        }
    }

    // Dessiner le personnage avec sa texture
    SDL_Rect playerRect = {(int)(playerX - cameraX * TILE_SIZE), (int)(playerY - cameraY * TILE_SIZE), TILE_SIZE, 1 * TILE_SIZE};
    SDL_RenderCopy(renderer, playerTexture, NULL, &playerRect);
}

bool checkCollision(Player* player) {
    int leftTile = (int)((player->x + COLLISION_MARGIN) / TILE_SIZE);
    int rightTile = (int)((player->x + TILE_SIZE - COLLISION_MARGIN) / TILE_SIZE);
    int topTile = (int)((player->y + COLLISION_MARGIN) / TILE_SIZE);
    int bottomTile = (int)((player->y + 1 * TILE_SIZE - COLLISION_MARGIN) / TILE_SIZE);

    if (leftTile < 0 || rightTile >= MAP_WIDTH || topTile < 0 || bottomTile >= MAP_HEIGHT) {
        return true;
    }

    return (map[leftTile][topTile] != 0 || map[rightTile][topTile] != 0 ||
            map[leftTile][bottomTile] != 0 || map[rightTile][bottomTile] != 0);
}

void handleEvents(bool* quit, Player* player) {
    SDL_Event event;
    while (SDL_PollEvent(&event) != 0) {
        if (event.type == SDL_QUIT) {
            *quit = true;
        } else if (event.type == SDL_KEYDOWN) {
            switch (event.key.keysym.sym) {
                case SDLK_LEFT:
                    player->vx = -PLAYER_SPEED;
                    break;
                case SDLK_RIGHT:
                    player->vx = PLAYER_SPEED;
                    break;
                case SDLK_SPACE:
                    if (player->isGrounded) {
                        player->vy = JUMP_FORCE;
                        player->isGrounded = false;
                    }
                    break;
            }
        } else if (event.type == SDL_KEYUP) {
            switch (event.key.keysym.sym) {
                case SDLK_LEFT:
                case SDLK_RIGHT:
                    player->vx = 0;
                    break;
            }
        }
    }
}

void updatePlayer(Player* player) {
    // Appliquer la gravité
    player->vy += GRAVITY;

    // Sauvegarder les anciennes coordonnées du joueur
    float oldX = player->x;
    float oldY = player->y;

    // Calculer la nouvelle position
    float newX = player->x + player->vx;
    float newY = player->y + player->vy;

    // Vérifier les collisions horizontales
    player->x = newX;
    if (checkCollision(player)) {
        player->x = oldX; // Revenir à l'ancienne position
        player->vx = 0; // Arrêter le mouvement horizontal
    }

    // Vérifier les collisions verticales
    player->y = newY;
    if (checkCollision(player)) {
        player->y = oldY; // Revenir à l'ancienne position
        player->vy = 0; // Arrêter le mouvement vertical
        player->isGrounded = true; // Le joueur est au sol
    } else {
        player->isGrounded = false; // Le joueur n'est pas au sol
    }

    // Vérifier si le joueur entre en contact avec un bloc spécial
    int playerTileX = (int)(player->x / TILE_SIZE);
    int playerTileY = (int)(player->y / TILE_SIZE);
    if (map[playerTileX][playerTileY] == SPECIAL ||
        map[playerTileX][playerTileY + 1] == SPECIAL ||
        map[playerTileX + 1][playerTileY] == SPECIAL ||
        map[playerTileX + 1][playerTileY + 1] == SPECIAL) {
        // Réinitialiser les coordonnées du joueur à ses coordonnées de départ
        player->x = START_X * TILE_SIZE;
        player->y = START_Y * TILE_SIZE;
    }
}



int main(int argc, char* args[]) {
    SDL_Window* window = NULL;
    SDL_Renderer* renderer = NULL;

    SDL_Init(SDL_INIT_VIDEO);

    window = SDL_CreateWindow("Map", SDL_WINDOWPOS_UNDEFINED, SDL_WINDOWPOS_UNDEFINED, SCREEN_WIDTH, SCREEN_HEIGHT, SDL_WINDOW_SHOWN);
    renderer = SDL_CreateRenderer(window, -1, SDL_RENDERER_ACCELERATED);

    int cameraX = 0;
    int cameraY = 0;

    // Chargement de la texture du joueur
    SDL_Texture* playerTexture = loadTexture("HeroHaut.bmp", renderer);
    if (playerTexture == NULL) {
        printf("Failed to load player texture!\n");
        return 1;
    }

    // chargement de la texture spéciale pour les tiles
    SDL_Texture* piqueH = loadTexture("piqueH.bmp", renderer);
    if (piqueH == NULL) {
        printf("Failed to load special tile texture!\n");
        return 1;
    }
    SDL_Texture* murH = loadTexture("murH.bmp", renderer);
    if (murH == NULL) {
        printf("Failed to load special tile texture!\n");
        return 1;
    }
    SDL_Texture* murG = loadTexture("murG.bmp", renderer);
    if (murG == NULL) {
        printf("Failed to load special tile texture!\n");
        return 1;
    }
    SDL_Texture* murD = loadTexture("murD.bmp", renderer);
    if (murD == NULL) {
        printf("Failed to load special tile texture!\n");
        return 1;
    }
    SDL_Texture* cobblemur = loadTexture("cobblemur.bmp", renderer);
    if (cobblemur == NULL) {
        printf("Failed to load special tile texture!\n");
        return 1;
    }
    SDL_Texture* cornerBG = loadTexture("cornerbg.bmp", renderer);
    if (cornerBG == NULL) {
        printf("Failed to load special tile texture!\n");
        return 1;
    }
    SDL_Texture* murB = loadTexture("murB.bmp", renderer);
    if (murB == NULL) {
        printf("Failed to load special tile texture!\n");
        return 1;
    }
    SDL_Texture* cornerBD = loadTexture("cornerBD.bmp", renderer);
    if (cornerBD == NULL) {
        printf("Failed to load special tile texture!\n");
        return 1;
    }
    SDL_Texture* cornerHG = loadTexture("cornerhg.bmp", renderer);
    if (cornerHG == NULL) {
        printf("Failed to load special tile texture!\n");
        return 1;
    }
    SDL_Texture* cornerHD = loadTexture("cornerhd.bmp", renderer);
    if (cornerHD == NULL) {
        printf("Failed to load special tile texture!\n");
        return 1;
    }

    bool quit = false;
    Player player = {START_X * TILE_SIZE, START_Y * TILE_SIZE, 0, 0, true};

    Uint32 lastTick = SDL_GetTicks();

    // Boucle principale
    while (!quit) {
        Uint32 currentTick = SDL_GetTicks();
        Uint32 deltaTime = currentTick - lastTick;
        lastTick = currentTick;

        handleEvents(&quit, &player);
        updatePlayer(&player);

        // Centrer la caméra sur le joueur
        cameraX = (int)(player.x / TILE_SIZE) - (SCREEN_WIDTH / TILE_SIZE / 2);
        cameraY = (int)(player.y / TILE_SIZE) - (SCREEN_HEIGHT / TILE_SIZE / 2);

        // Empêcher la caméra de sortir des limites de la carte
        if (cameraX < 0)
            cameraX = 0;
        if (cameraY < 0)
            cameraY = 0;
        if (cameraX > MAP_WIDTH - (SCREEN_WIDTH / TILE_SIZE))
            cameraX = MAP_WIDTH - (SCREEN_WIDTH / TILE_SIZE);
        if (cameraY > MAP_HEIGHT - (SCREEN_HEIGHT / TILE_SIZE))
            cameraY = MAP_HEIGHT - (SCREEN_HEIGHT / TILE_SIZE);

        SDL_SetRenderDrawColor(renderer, 0xFF, 0xFF, 0xFF, 0xFF);
        SDL_RenderClear(renderer);

        renderMap(renderer, cameraX, cameraY, player.x, player.y, playerTexture, piqueH, murH, murG, murD, cobblemur, cornerBG, murB, cornerBD, cornerHD, cornerHG);

        SDL_RenderPresent(renderer);

        Uint32 frameTime = SDL_GetTicks() - currentTick;
        if (frameTime < 16) { // Limiter à environ 60 FPS
            SDL_Delay(16 - frameTime);
        }
    }

    // Nettoyage
    SDL_DestroyTexture(playerTexture);
    SDL_DestroyTexture(piqueH);
    SDL_DestroyTexture(murH);
    SDL_DestroyTexture(murG);
    SDL_DestroyTexture(murD);
    SDL_DestroyTexture(murB);
    SDL_DestroyTexture(cobblemur);
    SDL_DestroyTexture(cornerBG);
    SDL_DestroyTexture(cornerBD);
    SDL_DestroyTexture(cornerHD);
    SDL_DestroyTexture(cornerHG);
    SDL_DestroyRenderer(renderer);
    SDL_DestroyWindow(window);
    SDL_Quit();

    return 0;
}
